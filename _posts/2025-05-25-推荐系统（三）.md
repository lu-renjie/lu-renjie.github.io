---
title: 【推荐系统】重排与混排
tags: 推荐系统 深度学习 笔记
published: false
---

## 重排

重排主要用来保证推荐的多样性，以及引入一些规则来对推荐的内容进行控制。多样性需要衡量物品之间的相似度。

![](https://secure2.wostatic.cn/static/3YF6WrZZcGor6RRsvJj26R/image.png?auth_key=1747999835-vkT5yRuy1aXzEsXbAcsitJ-0-ba48560a952776324b7dea5aa3be3729)

统计特征不适合用来衡量多样性，内容特征更合适。物品属性标签可以根据分级类目进行衡量。

### MMR多样性算法

考虑排序分数，和多样性分数得到一个MR分数，取MR分数即可。

### DPP多样性算法

最好的多样性算法！

利用行列式衡量item的多样性。具体来说，有k个item的embedding，归一化后，它们组成$d\times k$的矩阵$V$且$d≥k$，于是$|V^TV|$可以衡量它们的多样性，越接近1表示两两之间更加正交，因此多样性更好！

问题在于，这个计算量很大，于是有一种使用贪心进行近似求解的算法。

$$
\argmax \theta \sum_i s_i+(1-\theta)\log |V^TV|
$$

需要找到一个子集$S$，这是一个典型的整数规划问题，NP难。贪心地选择物品：

$$
\argmax_{i\in R} \theta s_i+(1-\theta)\log |A_{S\cup \{i\}}|
$$

找到1个$i$使得上述最大。Hulu提出了一个简单的算法进行求解，把复杂度从$O(n^4)$降低到$O(n^2)$。利用Cholesky分解$A=LL^T$，$L$是下三角矩阵，因为Cholesky分解可以增量的得到，并且易于计算行列式。

#### DPP+滑动窗口

如果数据本身的多样性有限，行列式会接近0，无法使用DPP算法。

### 规则约束

- 最多连续出现k种图文笔记
- 最多连续出现k种视频笔记
- 运营推广笔记，适当提高这类笔记的分数
- 限制运营推广笔记的数量
- 前4个笔记必须最好

## 混排

# 推荐系统架构